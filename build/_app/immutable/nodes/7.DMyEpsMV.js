import{s as me,b as oe,d as re}from"../chunks/scheduler.DY6Msf2u.js";import{S as $e,i as _e,u as le,e as d,h as P,s as C,c as p,a as I,l as S,d as i,k as L,j as ie,b as D,f as F,n as s,o as A,v as ge,t as T,g as q,p as H,q as Y,r as Z}from"../chunks/index.DjsPaKsZ.js";import{g as fe}from"../chunks/entry.DHkwwkLX.js";import{L as ue,I as ce,B as he,A as ve}from"../chunks/config.6PdDrzyK.js";import{I as we}from"../chunks/Icon.Bore18nx.js";function be(o){let n;return{c(){n=Y("Email")},l(e){n=Z(e,"Email")},m(e,a){F(e,n,a)},d(e){e&&i(n)}}}function Ee(o){let n;return{c(){n=Y("Password")},l(e){n=Z(e,"Password")},m(e,a){F(e,n,a)},d(e){e&&i(n)}}}function Ie(o){let n;return{c(){n=Y("Login")},l(e){n=Z(e,"Login")},m(e,a){F(e,n,a)},d(e){e&&i(n)}}}function je(o){let n,e,a,f,m,M,$,_="Entra",c,r,j,w,K,g,N,U,k,b,W,h,G,J,V,E,Q,x,ee='Non hai l&#39;account? <a href="/register">Registrati</a>',B,X,te;m=new we({props:{name:"home",color:"fill-neutral",size:"32"}}),w=new ue({props:{for:"email",$$slots:{default:[be]},$$scope:{ctx:o}}});function de(t){o[3](t)}let ne={type:"text",placeholder:"Email Address"};o[0]!==void 0&&(ne.value=o[0]),g=new ce({props:ne}),oe.push(()=>le(g,"value",de)),b=new ue({props:{for:"password",$$slots:{default:[Ee]},$$scope:{ctx:o}}});function pe(t){o[4](t)}let ae={type:"password",placeholder:"Enter Password"};return o[1]!==void 0&&(ae.value=o[1]),h=new ce({props:ae}),oe.push(()=>le(h,"value",pe)),E=new he({props:{type:"primary",$$slots:{default:[Ie]},$$scope:{ctx:o}}}),{c(){n=d("div"),e=d("div"),a=d("div"),f=d("a"),P(m.$$.fragment),M=C(),$=d("h1"),$.textContent=_,c=C(),r=d("form"),j=d("div"),P(w.$$.fragment),K=C(),P(g.$$.fragment),U=C(),k=d("div"),P(b.$$.fragment),W=C(),P(h.$$.fragment),J=C(),V=d("div"),P(E.$$.fragment),Q=C(),x=d("div"),x.innerHTML=ee,this.h()},l(t){n=p(t,"DIV",{class:!0});var l=I(n);e=p(l,"DIV",{class:!0});var v=I(e);a=p(v,"DIV",{});var O=I(a);f=p(O,"A",{href:!0});var R=I(f);S(m.$$.fragment,R),R.forEach(i),O.forEach(i),M=L(v),$=p(v,"H1",{class:!0,"data-svelte-h":!0}),ie($)!=="svelte-6lebn4"&&($.textContent=_),c=L(v),r=p(v,"FORM",{class:!0});var u=I(r);j=p(u,"DIV",{});var y=I(j);S(w.$$.fragment,y),K=L(y),S(g.$$.fragment,y),y.forEach(i),U=L(u),k=p(u,"DIV",{});var z=I(k);S(b.$$.fragment,z),W=L(z),S(h.$$.fragment,z),z.forEach(i),J=L(u),V=p(u,"DIV",{class:!0});var se=I(V);S(E.$$.fragment,se),se.forEach(i),Q=L(u),x=p(u,"DIV",{class:!0,"data-svelte-h":!0}),ie(x)!=="svelte-13sijfa"&&(x.innerHTML=ee),u.forEach(i),v.forEach(i),l.forEach(i),this.h()},h(){D(f,"href","/"),D($,"class","text-3xl font-semibold text-center"),D(V,"class","float-right"),D(x,"class","pt-2 block text-sm"),D(r,"class","space-y-4 text-neutral-700"),D(e,"class","w-96 p-6 m-auto bg-white text-neutral-700 rounded-md shadow-md lg:max-w-lg"),D(n,"class","relative flex flex-col justify-center h-screen overflow-hidden")},m(t,l){F(t,n,l),s(n,e),s(e,a),s(a,f),A(m,f,null),s(e,M),s(e,$),s(e,c),s(e,r),s(r,j),A(w,j,null),s(j,K),A(g,j,null),s(r,U),s(r,k),A(b,k,null),s(k,W),A(h,k,null),s(r,J),s(r,V),A(E,V,null),s(r,Q),s(r,x),B=!0,X||(te=ge(r,"submit",o[2]),X=!0)},p(t,[l]){const v={};l&32&&(v.$$scope={dirty:l,ctx:t}),w.$set(v);const O={};!N&&l&1&&(N=!0,O.value=t[0],re(()=>N=!1)),g.$set(O);const R={};l&32&&(R.$$scope={dirty:l,ctx:t}),b.$set(R);const u={};!G&&l&2&&(G=!0,u.value=t[1],re(()=>G=!1)),h.$set(u);const y={};l&32&&(y.$$scope={dirty:l,ctx:t}),E.$set(y)},i(t){B||(T(m.$$.fragment,t),T(w.$$.fragment,t),T(g.$$.fragment,t),T(b.$$.fragment,t),T(h.$$.fragment,t),T(E.$$.fragment,t),B=!0)},o(t){q(m.$$.fragment,t),q(w.$$.fragment,t),q(g.$$.fragment,t),q(b.$$.fragment,t),q(h.$$.fragment,t),q(E.$$.fragment,t),B=!1},d(t){t&&i(n),H(m),H(w),H(g),H(b),H(h),H(E),X=!1,te()}}}function ke(o,n,e){typeof window<"u"&&typeof document<"u"&&document.cookie.split("; ").find(c=>c.startsWith("jwt="))&&fe("/");let a="",f="";async function m(){let _="username="+a+"&password="+f;try{const c=await fetch(ve+"/users/auth/jwt/login",{method:"POST",headers:{accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:_.toString()});if(c.ok){const r=await c.json();document.cookie=`jwt=${r.access_token}; path=/`,console.log("login OK!"),fe("/")}else console.error("Login failed")}catch(c){console.error("Error:",c)}}function M(_){a=_,e(0,a)}function $(_){f=_,e(1,f)}return[a,f,m,M,$]}class Ve extends $e{constructor(n){super(),_e(this,n,ke,je,me,{})}}export{Ve as component};
